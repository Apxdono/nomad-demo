# Dynamic configuration
http:
  routers:
    api:
      rule: "Host(`traefik.{{ domain }}`)"
      service: "api@internal"
      entrypoints: "web"
      loadbalancer:
        server:
          port: "8080"
    consul:
      rule: "Host(`consul.{{ domain }}`)"
      service: "consul"
      entrypoints: "web"
    prometheus:
      rule: "Host(`prometheus.{{ domain }}`)"
      service: "prometheus"
      entrypoints: "web"

  services:
    consul:
      loadBalancer:
        servers:
          - url: "http://consul.service.consul:8500"
    prometheus:
      loadBalancer:
        servers:
          - url: "http://localhost:9090"
